@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground: #2c2416;
  --background: #fff8ed;
  --wall-brick: #a0522d;
  --wall-mortar: #8b7355;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground: #2c2416;
    --background: #f5e6d0;
  }
}

body {
  color: var(--foreground);
  background: transparent;
  font-family: system-ui, -apple-system, sans-serif;
  min-height: 100vh;
}

/* Фон стены (основной фон сайта задаётся в layout) */
.wall-page {
  background: transparent;
}

/* Контейнер стены */
.wall-container {
  max-width: 1400px;
}

/* Если ниши на картинке не впритык — задайте отступ (например 2% 3%) */
.wall-grid {
  --niche-inset: 0;
}

/* Плавное появление для контента */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

/* Spray FX: имитация баллона с краской над новым драконом */
.spray-fx-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 20;
  overflow: hidden;
}

.spray-fx-cloud {
  position: absolute;
  border-radius: 9999px;
  opacity: 0;
  filter: blur(8px);
  mix-blend-mode: screen;
  animation: sprayCloud 0.9s ease-out forwards;
}

.spray-fx-cloud-a {
  width: 62%;
  height: 34%;
  right: 12%;
  top: 25%;
  background: radial-gradient(circle, rgba(255, 130, 0, 0.85) 0%, rgba(255, 130, 0, 0.08) 70%, rgba(255, 130, 0, 0) 100%);
}

.spray-fx-cloud-b {
  width: 58%;
  height: 30%;
  right: 16%;
  top: 42%;
  background: radial-gradient(circle, rgba(255, 210, 80, 0.75) 0%, rgba(255, 210, 80, 0.06) 72%, rgba(255, 210, 80, 0) 100%);
  animation-delay: 0.08s;
}

.spray-fx-cloud-c {
  width: 48%;
  height: 24%;
  right: 22%;
  top: 18%;
  background: radial-gradient(circle, rgba(255, 90, 0, 0.7) 0%, rgba(255, 90, 0, 0.05) 72%, rgba(255, 90, 0, 0) 100%);
  animation-delay: 0.14s;
}

.spray-fx-can {
  position: absolute;
  left: 8%;
  top: 38%;
  width: 18%;
  height: 32%;
  border-radius: 6px;
  background: linear-gradient(180deg, rgba(60, 60, 60, 0.92) 0%, rgba(20, 20, 20, 0.9) 100%);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.08) inset;
  transform-origin: 85% 50%;
  animation: sprayCan 0.9s ease-out forwards;
}

.spray-fx-can::before {
  content: "";
  position: absolute;
  left: 15%;
  top: -14%;
  width: 70%;
  height: 18%;
  border-radius: 5px 5px 0 0;
  background: rgba(200, 200, 200, 0.95);
}

.spray-fx-can::after {
  content: "";
  position: absolute;
  right: -14%;
  top: 43%;
  width: 20%;
  height: 12%;
  border-radius: 2px;
  background: rgba(230, 230, 230, 0.9);
}

@keyframes sprayCloud {
  0% {
    transform: translate(-10%, 6%) scale(0.25);
    opacity: 0;
  }
  18% {
    opacity: 0.95;
  }
  100% {
    transform: translate(8%, -8%) scale(1.15);
    opacity: 0;
  }
}

@keyframes sprayCan {
  0% {
    transform: translateX(-22%) rotate(-18deg);
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  70% {
    transform: translateX(2%) rotate(-8deg);
    opacity: 1;
  }
  100% {
    transform: translateX(12%) rotate(-4deg);
    opacity: 0;
  }
}

/* 5-second reveal animation: slot paints over, dragon appears in sync */
.spray-reveal-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.spray-reveal-fill-layer {
  z-index: 5;
}

.spray-reveal-can-layer {
  z-index: 25;
}

.spray-reveal-fill {
  position: absolute;
  inset: -10%;
  background:
    radial-gradient(circle at 20% 30%, rgba(255, 170, 0, 0.95), transparent 45%),
    radial-gradient(circle at 80% 40%, rgba(255, 90, 0, 0.9), transparent 48%),
    radial-gradient(circle at 50% 80%, rgba(255, 220, 120, 0.8), transparent 52%),
    linear-gradient(100deg, rgba(20, 20, 20, 0.95) 0%, rgba(50, 30, 10, 0.92) 100%);
  transform-origin: left center;
  animation: sprayRevealFill 5s linear forwards;
}

.spray-reveal-can {
  position: absolute;
  left: 6%;
  top: 34%;
  width: 16%;
  height: 34%;
  border-radius: 6px;
  background: linear-gradient(180deg, rgba(80, 80, 80, 0.95) 0%, rgba(25, 25, 25, 0.95) 100%);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1) inset;
  animation: sprayRevealCan 5s linear forwards;
}

.spray-reveal-can::before {
  content: "";
  position: absolute;
  left: 15%;
  top: -12%;
  width: 70%;
  height: 16%;
  border-radius: 4px 4px 0 0;
  background: rgba(220, 220, 220, 0.95);
}

.spray-reveal-can::after {
  content: "";
  position: absolute;
  right: -16%;
  top: 45%;
  width: 20%;
  height: 10%;
  border-radius: 2px;
  background: rgba(235, 235, 235, 0.95);
}

@keyframes sprayRevealFill {
  0% {
    opacity: 0.95;
    clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);
  }
  10% {
    opacity: 0.95;
    clip-path: polygon(0 0, 18% 0, 22% 100%, 0 100%);
  }
  40% {
    opacity: 0.95;
    clip-path: polygon(0 0, 52% 0, 56% 100%, 0 100%);
  }
  75% {
    opacity: 0.95;
    clip-path: polygon(0 0, 86% 0, 90% 100%, 0 100%);
  }
  92% {
    opacity: 0.92;
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }
  100% {
    opacity: 0;
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }
}

@keyframes sprayRevealCan {
  0% {
    transform: translateX(-4%) rotate(-15deg);
    opacity: 0.95;
  }
  50% {
    transform: translateX(330%) rotate(-8deg);
    opacity: 0.98;
  }
  92% {
    transform: translateX(620%) rotate(-5deg);
    opacity: 0.95;
  }
  100% {
    transform: translateX(650%) rotate(-5deg);
    opacity: 0;
  }
}

/* Фото в слоте появляется постепенно в такт закрашивания граффити */
.brick-image-reveal {
  animation: brickImageReveal 5s linear forwards;
}

@keyframes brickImageReveal {
  0% {
    clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);
  }
  10% {
    clip-path: polygon(0 0, 18% 0, 22% 100%, 0 100%);
  }
  40% {
    clip-path: polygon(0 0, 52% 0, 56% 100%, 0 100%);
  }
  75% {
    clip-path: polygon(0 0, 86% 0, 90% 100%, 0 100%);
  }
  92%,
  100% {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }
}

/* Ник под фото: переливающийся текст #9c64fb (фон полоски — белый в разметке) */
.brick-nick-shimmer {
  background: linear-gradient(
    110deg,
    #9c64fb 0%,
    #b894ff 25%,
    #c9a8ff 50%,
    #b894ff 75%,
    #9c64fb 100%
  );
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: brickNickShimmer 4s ease-in-out infinite;
}

@keyframes brickNickShimmer {
  0%,
  100% {
    background-position: 0% center;
  }
  50% {
    background-position: 100% center;
  }
}
